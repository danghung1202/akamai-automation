"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[866],{3626:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>r,toc:()=>l});var t=s(4848),o=s(8453);const i={slug:"setup-nodejs-package-with-doc",title:"How To Set Up the Node.js Package project with Docusaurus"},c=void 0,r={permalink:"/akamai-automation/blog/setup-nodejs-package-with-doc",editUrl:"https://github.com/danghung1202/akamai-automation/tree/main/docs/blog/2024-08-26-setup-nodejs-package-with-doc/index.md",source:"@site/blog/2024-08-26-setup-nodejs-package-with-doc/index.md",title:"How To Set Up the Node.js Package project with Docusaurus",description:"To integrate the Docusaurus documentation site within your Node.js package project and have it under a docs folder, you can follow these steps.",date:"2024-08-26T00:00:00.000Z",tags:[],readingTime:2.955,hasTruncateMarker:!0,authors:[],frontMatter:{slug:"setup-nodejs-package-with-doc",title:"How To Set Up the Node.js Package project with Docusaurus"},unlisted:!1},a={authorsImageUrls:[]},l=[{value:"1. <strong>Set Up the Node.js Package</strong>",id:"1-set-up-the-nodejs-package",level:3},{value:"2. <strong>Set Up Docusaurus Inside the <code>docs</code> Folder</strong>",id:"2-set-up-docusaurus-inside-the-docs-folder",level:3},{value:"3. <strong>Set Up GitHub Actions</strong>",id:"3-set-up-github-actions",level:3},{value:"4. <strong>Commit, Push, and Deploy</strong>",id:"4-commit-push-and-deploy",level:3},{value:"Final Structure",id:"final-structure",level:3}];function d(n){const e={a:"a",code:"code",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.p,{children:["To integrate the Docusaurus documentation site within your Node.js package project and have it under a ",(0,t.jsx)(e.code,{children:"docs"})," folder, you can follow these steps."]}),"\n",(0,t.jsxs)(e.h3,{id:"1-set-up-the-nodejs-package",children:["1. ",(0,t.jsx)(e.strong,{children:"Set Up the Node.js Package"})]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Create a new directory:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"mkdir my-node-package\ncd my-node-package\n"})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Initialize a Node.js project:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"npm init -y\n"})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Install necessary dependencies:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"npm install --save-dev jest\n"})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsxs)(e.strong,{children:["Create a ",(0,t.jsx)(e.code,{children:".gitignore"})," file:"]})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:'echo "node_modules" > .gitignore\n'})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.h3,{id:"2-set-up-docusaurus-inside-the-docs-folder",children:["2. ",(0,t.jsxs)(e.strong,{children:["Set Up Docusaurus Inside the ",(0,t.jsx)(e.code,{children:"docs"})," Folder"]})]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsxs)(e.strong,{children:["Create the Docusaurus project inside the ",(0,t.jsx)(e.code,{children:"docs"})," folder:"]})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"npx create-docusaurus@latest docs classic\ncd docs\n"})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Update Docusaurus configuration:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Open ",(0,t.jsx)(e.code,{children:"docusaurus.config.js"})," inside the ",(0,t.jsx)(e.code,{children:"docs"})," folder and configure the ",(0,t.jsx)(e.code,{children:"url"})," and ",(0,t.jsx)(e.code,{children:"baseUrl"})," as follows:"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-javascript",children:"module.exports = {\n  // Other configurations...\n\n  url: 'https://<username>.github.io',\n  baseUrl: '/<repo-name>/',\n  organizationName: '<username>', // GitHub organization/user name.\n  projectName: '<repo-name>', // GitHub repo name.\n\n  // Other configurations...\n};\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.h3,{id:"3-set-up-github-actions",children:["3. ",(0,t.jsx)(e.strong,{children:"Set Up GitHub Actions"})]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Configure GitHub Actions for NPM Publishing"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Create a GitHub Actions workflow:"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"mkdir -p .github/workflows\ntouch .github/workflows/publish.yml\n"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Edit the ",(0,t.jsx)(e.code,{children:"publish.yml"})," file:"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"name: Node.js Package\n\non:\n  push:\n    branches:\n      - main\n    tags:\n      - 'v*.*.*'\n\njobs:\n  release:\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Check out the code\n        uses: actions/checkout@v3\n\n      - name: Set up Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: '18'\n          registry-url: 'https://registry.npmjs.org'\n          cache: 'npm'\n\n      - name: Install dependencies\n        run: npm install\n\n      - name: Run tests\n        run: npm test\n\n      - name: Publish to npm\n        run: npm publish\n        env:\n          NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}\n"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Note:"})," Ensure you add your ",(0,t.jsx)(e.code,{children:"NPM_TOKEN"})," as a secret in your GitHub repository. Following this link ",(0,t.jsx)(e.a,{href:"https://stackoverflow.com/questions/70631423/github-action-for-npm-publish-fails",children:"https://stackoverflow.com/questions/70631423/github-action-for-npm-publish-fails"})," to get correct NPM secret"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Configure GitHub Actions to Deploy Docusaurus Documentation"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Add another workflow file for deploying Docusaurus documentation:"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"touch .github/workflows/deploy-docs.yml\n"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Edit the ",(0,t.jsx)(e.code,{children:"deploy-docs.yml"})," file:"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"name: Deploy Docusaurus Documentation\n\non:\n  push:\n    paths:\n      - '.github/workflows/deploy-doc.yml'\n      - 'docs/**'\n    # Review gh actions docs if you want to further define triggers, paths, etc\n    # https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#on\n\njobs:\n  deploy:\n    name: Deploy Docusaurus to GitHub Pages\n    runs-on: ubuntu-latest\n    defaults:\n      run:\n        working-directory: ./docs\n\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Setup Node\n        uses: actions/setup-node@v3\n        with:\n          node-version: 18\n          cache: npm\n\n      - name: Install dependencies\n        run: npm install --frozen-lockfile\n\n      - name: Build website\n        run: npm run build\n\n      # Popular action to deploy to GitHub Pages:\n      # Docs: https://github.com/peaceiris/actions-gh-pages#%EF%B8%8F-docusaurus\n      - name: Deploy to GitHub Pages\n        uses: peaceiris/actions-gh-pages@v4\n        # Only publish when the changes was made on main branch\n        if: github.ref == 'refs/heads/main'\n        with:\n          github_token: ${{ secrets.GH_TOKEN }}\n          # Build output to publish to the `gh-pages` branch:\n          publish_dir: ./docs/build\n"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Note:"})," Ensure you add your ",(0,t.jsx)(e.code,{children:"GH_TOKEN"})," as a secret in your GitHub repository."]}),"\n",(0,t.jsxs)(e.ol,{start:"4",children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.strong,{children:"Setup Github Page"})}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:'Under your repository name, click  Settings. If you cannot see the "Settings" tab, select the  dropdown menu, then click Settings. Following setting as image below:'}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{alt:"Github Page",src:s(1300).A+"",width:"1196",height:"753"})}),"\n",(0,t.jsxs)(e.h3,{id:"4-commit-push-and-deploy",children:["4. ",(0,t.jsx)(e.strong,{children:"Commit, Push, and Deploy"})]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Add all files:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:'git add .\ngit commit -m "Set up Node.js package, GitHub Actions, and Docusaurus documentation"\n'})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Push to GitHub:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"git push origin main\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"final-structure",children:"Final Structure"}),"\n",(0,t.jsx)(e.p,{children:"Your project structure should look like this:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"my-node-package/\n\u2502\n\u251c\u2500\u2500 .github/\n\u2502   \u2514\u2500\u2500 workflows/\n\u2502       \u251c\u2500\u2500 publish.yml\n\u2502       \u2514\u2500\u2500 deploy-docs.yml\n\u2502\n\u251c\u2500\u2500 docs/\n\u2502   \u251c\u2500\u2500 docusaurus.config.js\n\u2502   \u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 static/\n\u2502   \u251c\u2500\u2500 ...\n\u2502\n\u251c\u2500\u2500 node_modules/\n\u2502\n\u251c\u2500\u2500 .gitignore\n\u251c\u2500\u2500 package.json\n\u2514\u2500\u2500 README.md\n"})}),"\n",(0,t.jsx)(e.p,{children:"With this setup:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["The Node.js package will be automatically published to npm when you push a new tag matching the pattern ",(0,t.jsx)(e.code,{children:"v*.*.*"}),"."]}),"\n",(0,t.jsxs)(e.li,{children:["Documentation will be automatically built and deployed to GitHub Pages when changes are pushed to the ",(0,t.jsx)(e.code,{children:"main"})," branch."]}),"\n"]})]})}function u(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},1300:(n,e,s)=>{s.d(e,{A:()=>t});const t=s.p+"assets/images/setup-github-page-14ca8528e6001e41e14525ba1637f9b1.jpg"},8453:(n,e,s)=>{s.d(e,{R:()=>c,x:()=>r});var t=s(6540);const o={},i=t.createContext(o);function c(n){const e=t.useContext(i);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:c(n.components),t.createElement(i.Provider,{value:e},n.children)}}}]);